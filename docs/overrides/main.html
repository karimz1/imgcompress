{% extends "base.html" %}

{% block extrahead %}
<!-- Performance: Resource Hinting -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- Critical Path CSS: Pre-render layout to eliminate FCP/LCP bottlenecks -->
<style>
  /* Minimal logic to ensure text visibility during font load */
  body {
    font-display: swap !important;
  }
</style>

<!-- SEO & Social Meta Tags -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="ImgCompress Documentation">
<meta property="og:url" content="{{ page.canonical_url }}">
<meta property="og:title" content="{{ page.title | default(config.site_name) }}">
<meta property="og:description" content="{{ page.meta.description | default(config.site_description) }}">
<meta property="og:image" content="{{ config.site_url }}images/imgcompress-og-image.webp">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="ImgCompress: Simple & Private Self-Hosted Docker Image Optimizer">
<meta property="og:locale" content="en_US">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="{{ page.canonical_url }}">
<meta name="twitter:title" content="{{ page.title | default(config.site_name) }}">
<meta name="twitter:description" content="{{ page.meta.description | default(config.site_description) }}">
<meta name="twitter:image" content="{{ config.site_url }}images/imgcompress-og-image.webp">
<meta name="twitter:image:alt" content="ImgCompress: Simple & Private Self-Hosted Docker Image Optimizer">

<link rel="canonical" href="{{ page.canonical_url }}">
<link rel="me" href="https://github.com/karimz1">
<link rel="me" href="https://karimzouine.com">

<!-- Structured Data -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "SoftwareApplication",
        "@id": "{{ config.site_url }}#software",
        "name": "ImgCompress",
        "url": "{{ config.site_url }}",
        "downloadUrl": "https://github.com/karimz1/imgcompress",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Docker, Windows, Linux, MacOS",
        "description": "{{ config.site_description | replace('\n', ' ') }}",
        "softwareVersion": "latest",
        "screenshot": "{{ config.site_url }}images/web-ui-workflow/web-ui-upload-configure.webp",
        "image": {
          "@type": "ImageObject",
          "url": "{{ config.site_url }}images/imgcompress-og-image.webp",
          "width": "1024",
          "height": "1024"
        },
        "featureList": [
          "Image compression and optimization",
          "AI-powered background removal",
          "HEIC/HEIF to JPG conversion",
          "PDF to image extraction",
          "Batch processing with multi-core support",
          "CLI automation for CI/CD pipelines",
          "70+ format support including WebP, AVIF, PSD, EPS, TIFF"
        ],
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "author": {
          "@id": "https://karimzouine.com/#person"
        }
      },
      {
        "@type": "Person",
        "@id": "https://karimzouine.com/#person",
        "name": "{{ config.site_author }}",
        "url": "https://karimzouine.com",
        "sameAs": [
          "https://github.com/karimz1",
          "https://github.com/karimz1/imgcompress",
          "https://hub.docker.com/r/karimz1/imgcompress",
          "https://imgcompress.karimzouine.com"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "{{ config.site_url }}#website",
        "url": "{{ config.site_url }}",
        "name": "{{ config.site_name }}",
        "publisher": {
          "@id": "https://karimzouine.com/#person"
        }
      },
      {
        "@type": "TechArticle",
        "@id": "{{ page.canonical_url }}#article",
        "headline": "{{ page.title | default(config.site_name) }}",
        "description": "{{ page.meta.description | default(config.site_description) }}",
        "url": "{{ page.canonical_url }}",
        "author": {
          "@id": "https://karimzouine.com/#person"
        },
        "publisher": {
          "@id": "https://karimzouine.com/#person"
        },
        "mainEntityOfPage": "{{ page.canonical_url }}",
        "about": {
          "@id": "{{ config.site_url }}#software"
        },
        "keywords": "{% if page.meta.tags %}{{ page.meta.tags | join(', ') }}{% else %}image compression, docker, privacy, ai, background removal, web optimization{% endif %}",
        "proficiencyLevel": "Beginner"
      },
      {
        "@type": "BreadcrumbList",
        "@id": "{{ page.canonical_url }}#breadcrumb",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "{{ config.site_url }}"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "{{ page.title | default('Documentation') }}",
            "item": "{{ page.canonical_url }}"
          }
        ]
      }
    ]
  }
  </script>
{% endblock %}

{% block hero %}
{% if page.meta and page.meta.hero %}
<header class="md-hero md-hero--imgcompress">
  <div class="md-hero__inner">

    <!-- Text Content -->
    <h1 class="imgcompress-title">
      {{ page.meta.hero_title }}
      {% if page.meta.hero_subtitle_gradient %}
      <span class="gradient-text">{{ page.meta.hero_subtitle_gradient }}</span>
      {% endif %}
    </h1>

    <p class="imgcompress-description">
      {{ page.meta.hero_description }}
    </p>

    <!-- Floating UI Screenshot -->
    {% if page.meta.hero_image %}
    <div class="imgcompress-screenshot-container">
      <div class="window-controls">
        <div class="window-dot dot-red"></div>
        <div class="window-dot dot-yellow"></div>
        <div class="window-dot dot-green"></div>
      </div>
      <img src="{{ page.meta.hero_image | url }}" alt="App Screenshot" loading="eager">
    </div>
    {% endif %}

    <!-- Actions Container (Below the image, text-first) -->
    <div class="imgcompress-actions-container">
      {% if page.meta.hero_button_text %}
      <a href="{{ page.meta.hero_button_link | url }}" class="imgcompress-primary-btn">
        {{ page.meta.hero_button_text }} <i class="fa-solid fa-arrow-right"></i>
      </a>
      {% endif %}

      <div class="imgcompress-stats" aria-label="Docker pulls">
        <i class="fa-brands fa-docker"></i>
        <span><span class="docker-pull-count">Loading...</span> pulls</span>
      </div>
    </div>

  </div>
</header>
{% endif %}
{% endblock %}
